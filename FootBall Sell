repeat wait() until game:IsLoaded()
repeat wait() until game.Players.LocalPlayer.Character
repeat wait() until game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
wait(2)

if _G.AutoRob then warn("Auto Rob j√° estava ativo.") return end
_G.AutoRob = true
print("Auto robber carregado")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Bases = workspace:WaitForChild("Map"):WaitForChild("Bases")

local function hasNPC(base, padNum)
	local imp = base:FindFirstChild("Important", true)
	local pads = imp and imp:FindFirstChild("NPCPads", true)
	local pad = pads and pads:FindFirstChild(tostring(padNum))
	return pad and pad:FindFirstChild("Character")
end

local function isFull(base)
	for i = 1, 10 do
		if not hasNPC(base, i) then return false end
	end
	return true
end

local function triggerUntilGone(npc)
	local prompt = npc:FindFirstChild("SlotPrompt", true)
	if prompt and prompt:IsA("ProximityPrompt") then
		while npc.Parent do
			LocalPlayer.Character:PivotTo(prompt.Parent.CFrame + Vector3.new(0, 2, 0))
			task.wait(0.05)
			fireproximityprompt(prompt)
			task.wait(0.3)
		end
	end
end

local function getMyBase()
	for _, base in ipairs(Bases:GetChildren()) do
		for _, d in ipairs(base:GetDescendants()) do
			if d:IsA("TextLabel") and d.Text == LocalPlayer.Name.."'s Slot" then
				return base
			end
		end
	end
	return nil
end

while true do
	local myBase = getMyBase()

	if myBase then
		myBase.Important.RobberyDeposit.Size = Vector3.new(2000,100,2000)
		if isFull(myBase) then
			local pads = myBase.Important:FindFirstChild("NPCPads", true)
			for i = 1, 10 do
				local node = pads and pads:FindFirstChild(tostring(i))
				if node then
					local char = node:FindFirstChild("Character")
					if char then
						triggerUntilGone(char)
					end
				end
			end
		end
	end

	for i = 1, 8 do
		local base = Bases:FindFirstChild(tostring(i))
		if base and base ~= myBase then
			local pads = base:FindFirstChild("Important", true):FindFirstChild("NPCPads", true)
			for pad = 1, 10 do
				local node = pads and pads:FindFirstChild(tostring(pad))
				if node then
					local char = node:FindFirstChild("Character")
					if char then
						triggerUntilGone(char)
					end
				end
			end
		end
	end

	task.wait(0.1)
end
